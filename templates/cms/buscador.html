{% extends "base.html" %}
{% load static %}
{% block content %}

<link href="{% static 'css/buscador.css' %}" rel="stylesheet" />

<form id="search-form" action="{% url 'buscador' %}" method="GET" onsubmit="return submitBothForms()">
    {% csrf_token %}
    <div id="search-container">
        <input type="text" id="q" name="q" placeholder="Buscar">
        <a id="gris" href="javascript:void(0);" onclick="submitBothForms()">
            <i class="fas fa-search"></i>
        </a>
        
        <div id="filter-icon">
            <a class="nav-link" id="btnMostrarBusquedaAvanzada" href="#!" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-cog"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                <!-- Contenido del formulario de búsqueda avanzada -->
                <h6 class="dropdown-header">Búsqueda Avanzada</h6>

                <div class="dropdown-item" >{{ avanzada_form.as_p }}</div>
            </ul>
        </div>
    </div>
</form>

<script>
document.getElementById("q").addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        submitBothForms();
    }
});

function submitBothForms() {
    var q = document.getElementById("q");
    var q_avanzada = document.getElementById("id_q");
    q_avanzada.value = q.value;
    document.getElementById("search-form").submit();
    return true;
}
</script>

{% if publicaciones %}
<div id="results">
    {% include 'cms/publicaciones.html' %}
</div>
{% else %}
<p id="search-form">No hubo resultados</p>
{% endif %}
{% endblock %}
