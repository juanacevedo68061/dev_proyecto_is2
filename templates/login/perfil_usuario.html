{% extends 'base.html' %}
{% block title %}Perfil de {{ usuario.username }}{% endblock %}

{% block content %}
  <style>
    /* Estilos para el círculo de la imagen de perfil */
    .perfil-circle {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #f0f0f0; /* Color de fondo del círculo */
    }

    /* Estilos para la imagen de perfil */
    .perfil-circle img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
  </style>

  <h1>Bienvenido, {{ usuario.username }}</h1>
  <p>Correo electrónico: {{ usuario.email }}</p><br>
  
  <!-- Mostrar rol activado si existe -->
  {% if usuario.rol_activo %}
    <h2>Rol activado</h2>
    <p>{{ usuario.rol_activo.nombre }}</p><br>
  {% else %}  
    <p>No tienes ningún rol activado</p><br>
  {% endif %}
  
  <!-- Mostrar la imagen de perfil actual del usuario si existe -->
  <h2>Imagen de perfil</h2>
  <div class="perfil-circle">
    {% if usuario.imagen %}
      <img src="{{ usuario.imagen.url }}" alt="Imagen de perfil">
    {% else %}
      <i class="fas fa-user"></i> <!-- Icono de persona si no hay foto de perfil -->
    {% endif %}
  </div>

  <!-- Formulario para cargar una nueva imagen de perfil -->
  <h2>Cargar una nueva imagen de perfil</h2>
  <form method="post" enctype="multipart/form-data" action="{% url 'login:cargar_imagen' %}">
    {% csrf_token %}
    <input type="file" name="imagen" accept="image/*" required>
    <button type="submit">Cargar Imagen</button>
  </form><br>
  
  <!-- Mostrar opción para activar un rol -->
  {% if roles %}
    <h2>Activar Rol</h2>
    <form method="post" action="{% url 'login:activar_rol' %}">
      {% csrf_token %}
      <select name="rol_activado">
        {% for rol in roles %}
          <option value="{{ rol.id }}">{{ rol.nombre }}</option>
        {% endfor %}
      </select>
      <button type="submit">Activar Rol</button>
    </form>
  {% else %}
    <p>{{ mensaje_roles }}</p>
  {% endif %}<br>
  
  <!-- Enlace para ir a la página de actualización de perfil -->
  <a href="{% url 'login:perfil_actualizar' %}" class="boton-actualizar">Actualizar Perfil</a><br>
  
  <!-- Enlace para crear una nueva publicación -->
  <a href="{% url 'publicaciones:crear_publicacion' %}" class="boton-crear-publicacion">Crear una nueva publicación</a><br>
  
  <!-- Agregar enlace al botón para ir a la página principal -->
  <a href="/" class="boton-principal">Ir a la página principal</a>
{% endblock %}


